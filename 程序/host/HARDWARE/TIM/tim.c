#include "tim.h"


unsigned int t = 0;
uint flag_1s = 0;
int time = 30;

/*******************************************************************************
* 函数名         : TIM_Init
* 功能		  	 : 初始化定时器0
* 输入			 ：无
* 输出			 : 无
*******************************************************************************/
void TIM_Init()
{
	TMOD |= 0X01;				//定时器0工作方式1
	TH0 = (65536-50000)/256;	//定时50毫秒
	TL0 = (65536-50000)%256;
	ET0 = 1;					//开定时器0中断
	TR0 = 1;					//启动定时器0
}


/*******************************************************************************
* 函数名         : TIM_IRQHandler
* 功能		  	 : 一秒更新一次flag_1s标志位
* 输入			 ：无
* 输出			 : 无
*******************************************************************************/
void TIM_IRQHandler() interrupt 1
{
	TH0 = (65536-50000)/256;
	TL0 = (65536-50000)%256;
	t++;
	if(t == 20)
	{
		flag_1s = 1;
		t = 0;
	}
}